<h2>Documents</h2>

<table border="1" cellpadding="8" cellspacing="0" style="width: 100%; border-collapse: collapse;">
  <thead>
    <tr style="background-color: #f0f0f0;">
      <th>ID</th>
      <th>File Name</th>
      <th>Summary</th>
      <th>Created At</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    @for (doc of documents; track doc; let i = $index) {
      <tr>
        <td>{{ doc.id }}</td>
        @if (!doc.editing) {
          <td>{{ doc.fileName }}</td>
        }
        @if (doc.editing) {
          <td>
            <input [(ngModel)]="doc.fileName" />
          </td>
        }
        @if (!doc.editing) {
          <td>{{ doc.summary }}</td>
        }
        @if (doc.editing) {
          <td>
            <input [(ngModel)]="doc.summary" />
          </td>
        }
        <td>{{ doc.createdAt ? (doc.createdAt | date:'short') : '-' }}</td>
        <td>
          @if (!doc.editing) {
            <button (click)="editDocument(doc)">Edit</button>
          }
          @if (doc.editing) {
            <button type="button" (click)="saveDocument(doc)" class="btn btn-success btn-sm">Save</button>
            }      @if (doc.editing) {
            <button (click)="cancelEdit(doc)">Cancel</button>
          }
          <button (click)="deleteDocument(doc.id)">Delete</button>
        </td>
      </tr>
    }
  </tbody>
</table>

<h3>Add Document</h3>
<form (ngSubmit)="addDocument()">
  <input type="text" placeholder="File Name" [(ngModel)]="newDocument.fileName" name="fileName" required />
  <input type="text" placeholder="Summary" [(ngModel)]="newDocument.summary" name="summary" required />
  <button type="submit">Add</button>
</form>
